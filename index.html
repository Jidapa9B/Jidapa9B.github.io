<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>โครงการบ้าน - Company</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; }
    header, footer { background:#333; color:#fff; padding:10px; text-align:center; }
    nav button { margin:5px; padding:8px 12px; }
    section { display:none; padding:20px; }
    section.active { display:block; }
    .gallery { display:flex; flex-wrap:wrap; gap:10px; }
    .gallery-item { flex:1 1 calc(33% - 10px); cursor:pointer; }
    .gallery-item img { max-width:100%; border-radius:4px; }
    .contact-form { max-width:400px; margin:auto; display:flex; flex-direction:column; gap:10px; }
    .contact-form input, .contact-form textarea, .contact-form button { padding:8px; }
    .calc-container { max-width:400px; margin:auto; }
    .result { background:#f0f0f0; padding:10px; margin-top:10px; border-radius:4px; }
  </style>
</head>
<body>
  <header>
    <h1>บริษัทพัฒนาโครงการบ้าน</h1>
    <nav id="nav">
      <button data-target="home">หน้าแรก</button>
      <button data-target="projects">โครงการ</button>
      <button data-target="mortgage">คำนวณสินเชื่อ</button>
      <button data-target="contact">ติดต่อเรา</button>
    </nav>
  </header>

  <main>
    <section id="home" class="active">
      <h2>ยินดีต้อนรับ</h2>
      <p>เราคือบริษัทที่มุ่งมั่นในการพัฒนาโครงการบ้านคุณภาพ</p>
    </section>

    <section id="projects">
      <h2>โครงการบ้าน</h2>
      <div id="category-buttons"></div>
      <div id="project-gallery" class="gallery"></div>
    </section>

    <section id="mortgage">
      <h2>คำนวณสินเชื่อบ้าน</h2>
      <div class="calc-container">
        <form id="calc-form">
          <label>ราคาบ้าน: <input type="number" id="calc-price" value="3200000" required></label><br>
          <label>เงินดาวน์ (%): <input type="number" id="calc-down" value="10" required></label><br>
          <label>อัตราดอกเบี้ย (% ต่อปี): <input type="number" step="0.01" id="calc-rate" value="5.5" required></label><br>
          <label>ระยะเวลากู้ (ปี): <input type="number" id="calc-years" value="30" required></label><br>
          <button type="submit" id="calc-btn">คำนวณ</button>
          <button type="reset" id="calc-reset">รีเซ็ต</button>
        </form>
        <div id="calc-result" class="result" style="display:none"></div>
      </div>
    </section>

    <section id="contact">
      <h2>ติดต่อเรา</h2>
      <form id="contact-form" class="contact-form">
        <input type="text" id="c-name" placeholder="ชื่อของคุณ" required>
        <input type="email" id="c-email" placeholder="อีเมล" required>
        <textarea id="c-msg" placeholder="ข้อความ" required></textarea>
        <button type="submit">ส่งข้อความ</button>
        <button type="button" id="contact-cancel">ยกเลิก</button>
      </form>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 บริษัทพัฒนาโครงการบ้าน</p>
  </footer>

  <script>
    const $ = s => document.querySelector(s);

    // nav
    function showSection(id){
      document.querySelectorAll('main section').forEach(sec=>sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }
    function setupNav(){
      document.querySelectorAll('#nav button').forEach(btn=>{
        btn.addEventListener('click',()=>showSection(btn.dataset.target));
      });
    }

    // projects
    const projects = [
      {category:'บ้านเดี่ยว', name:'บ้านเดี่ยว A', img:'https://via.placeholder.com/300x200?text=บ้านเดี่ยวA'},
      {category:'บ้านเดี่ยว', name:'บ้านเดี่ยว B', img:'https://via.placeholder.com/300x200?text=บ้านเดี่ยวB'},
      {category:'ทาวน์โฮม', name:'ทาวน์โฮม C', img:'https://via.placeholder.com/300x200?text=ทาวน์โฮมC'},
      {category:'คอนโด', name:'คอนโด D', img:'https://via.placeholder.com/300x200?text=คอนโดD'},
      {category:'คอนโด', name:'คอนโด E', img:'https://via.placeholder.com/300x200?text=คอนโดE'}
    ];
    const categories = [...new Set(projects.map(p=>p.category))];
    function renderCategoryButtons(){
      const cwrap = document.getElementById('category-buttons');
      cwrap.innerHTML='';
      categories.forEach(cat=>{
        const btn = document.createElement('button');
        btn.textContent=cat;
        btn.addEventListener('click',()=>renderProjects(cat));
        cwrap.appendChild(btn);
      });
    }
    function renderProjects(cat){
      const gwrap = document.getElementById('project-gallery');
      gwrap.innerHTML='';
      projects.filter(p=>p.category===cat).forEach(p=>{
        const div=document.createElement('div');
        div.className='gallery-item';
        div.innerHTML=`<img src="${p.img}" alt="${p.name}"><p>${p.name}</p>`;
        gwrap.appendChild(div);
      });
    }

    // mortgage calculator
    function calculateMortgage(){
      const price=+$('#calc-price').value;
      const downPercent=+$('#calc-down').value;
      const rate=+$('#calc-rate').value/100/12;
      const years=+$('#calc-years').value;
      const n=years*12;
      const loan=price*(1-downPercent/100);
      const monthly=(loan*rate*Math.pow(1+rate,n))/(Math.pow(1+rate,n)-1);
      $('#calc-result').style.display='block';
      $('#calc-result').innerHTML=`<p>ยอดกู้: ${loan.toLocaleString()} บาท</p><p>ผ่อนต่อเดือนประมาณ: ${monthly.toFixed(2).toLocaleString()} บาท</p>`;
    }

    // contact form
    function submitContact(e){
      e.preventDefault();
      alert("ส่งข้อความเรียบร้อย ขอบคุณค่ะ");
      $('#contact-form').reset();
    }

    // init
    document.addEventListener('DOMContentLoaded', ()=>{
      setupNav(); 
      renderCategoryButtons(); 
      renderProjects(categories[0]);
      $('#calc-form').addEventListener('submit',(e)=>{e.preventDefault();calculateMortgage();});
      $('#calc-reset').addEventListener('click',()=>{$('#calc-result').style.display='none';});
      $('#contact-form').addEventListener('submit',submitContact);
      $('#contact-cancel').addEventListener('click',()=>showSection('home'));
    });

    /* ========= Lightbox Popup ========= */
    document.addEventListener('click', function(e){
      if(e.target.closest('.gallery-item')){
        const img = e.target.closest('.gallery-item').querySelector('img');
        const src = img.getAttribute('src');
        const alt = img.getAttribute('alt') || '';
        const lightbox = document.getElementById('lightbox');
        const lightImg = document.getElementById('lightbox-img');
        lightImg.src = src;
        lightImg.alt = alt;
        lightbox.style.display = 'flex';
      }
    });
    function closeLightbox(){
      document.getElementById('lightbox').style.display='none';
      document.getElementById('lightbox-img').src='';
    }
  </script>

  <!-- ========= Lightbox HTML ========= -->
  <div id="lightbox">
    <span id="lightbox-close">&times;</span>
    <img id="lightbox-img" src="" alt="">
  </div>

  <!-- ========= Lightbox CSS ========= -->
  <style>
    #lightbox{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      justify-content:center;
      align-items:center;
      z-index:9999;
    }
    #lightbox img{
      max-width:90%;
      max-height:90%;
      border-radius:8px;
      box-shadow:0 8px 24px rgba(0,0,0,0.5);
    }
    #lightbox-close{
      position:absolute;
      top:20px;
      right:30px;
      font-size:42px;
      font-weight:bold;
      color:#fff;
      cursor:pointer;
      user-select:none;
    }
    #lightbox-close:hover{color:#ff5555}
  </style>

  <script>
    // ปิด Lightbox
    document.getElementById('lightbox-close').addEventListener('click', closeLightbox);
    document.getElementById('lightbox').addEventListener('click', function(e){
      if(e.target === this){ closeLightbox(); }
    });
    document.addEventListener('keydown', function(e){
      if(e.key==='Escape'){ closeLightbox(); }
    });
  </script>
</body>
</html>
