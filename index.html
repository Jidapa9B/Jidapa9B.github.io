<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‚Äî ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</title>
  <style>
    :root{--green:#2E8B57; --green-dark:#218a55; --maxw:1100px; --radius:12px}
    *{box-sizing:border-box}
    body{font-family: "Noto Sans", sans-serif; margin:0; color:#123; background:#fafafa}
    .container{max-width:var(--maxw); margin:0 auto; padding:0 18px}

    /* ===== Header with big background image (like original) ===== */
    header.hero{height:320px; background-size:cover; background-position:center; position:relative;}
    header.hero::after{content:""; position:absolute; inset:0; background:linear-gradient(to bottom, rgba(0,0,0,0.25), rgba(0,0,0,0.45));}
    .hero-inner{position:relative; z-index:2; height:100%; display:flex; align-items:center; justify-content:center; flex-direction:column}
    .hero-title{color:#fff; font-size:44px; font-weight:800; text-shadow:0 6px 18px rgba(0,0,0,0.45); margin:0}

    /* green nav bar under hero (flat like screenshot) */
    nav.topnav{background:var(--green);}
    nav.topnav .container{padding:0}
    nav.topnav ul{list-style:none; margin:0; padding:12px 18px; display:flex; gap:18px; align-items:center}
    nav.topnav a{color:#fff; text-decoration:none; font-weight:700}

    /* Main content area */
    main{padding:18px 0}

    /* Category buttons (4) under nav */
    .cat-row{display:flex; gap:12px; margin-top:14px;}
    .cat{flex:1; background:#f3f9f3; border-radius:10px; padding:14px; text-align:center; cursor:pointer; border:1px solid #e6f4ea}
    .cat strong{display:block; margin-top:6px}
    .cat:hover{box-shadow:0 8px 20px rgba(0,0,0,0.06)}

    /* Projects carousel area (horizontal scroll) */
    .projects-wrap{margin-top:18px}
    .projects-carousel{display:flex; gap:14px; overflow-x:auto; padding:12px 6px; scroll-snap-type:x mandatory}
    .projects-carousel::-webkit-scrollbar{height:10px}
    .projects-carousel::-webkit-scrollbar-thumb{background:#dfefde; border-radius:8px}
    .project-card{flex:0 0 420px; background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.06); scroll-snap-align:start}
    .project-card img{width:100%; height:220px; object-fit:cover}
    .project-body{padding:14px}
    .project-title{font-size:20px; margin:0 0 6px}
    .project-desc{color:#4a654f}
    .project-price{margin-top:10px; font-weight:800; color:var(--green-dark)}
    .project-btn{margin-top:12px}

    /* Buttons (added) */
    .btn{
      padding:8px 14px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      color:#fff;
      font-weight:600;
      transition:opacity .15s ease;
    }
    .btn:hover{opacity:.92}

    /* Detail page boxes styled like your screenshot */
    .detail{display:none}
    .detail .box{border-radius:10px; padding:14px; margin-bottom:12px}
    .box.info{background:#eaf6ff;}
    .box.highlights{background:#f2fff6}
    .box.price{background:linear-gradient(90deg,#fff2fb,#fbe9ff)}
    .box.contact{background:linear-gradient(90deg,#2b9cf6,#7b48ff); color:#fff}

    .info-row{display:flex; gap:12px; align-items:center}
    .info-item{flex:1}

    /* small responsive adjustments */
    @media(max-width:900px){
      .project-card{flex:0 0 340px}
      .hero-title{font-size:34px}
      .cat-row{flex-direction:row}
    }
    @media(max-width:520px){
      header.hero{height:220px}
      .project-card{flex:0 0 85%}
      .cat-row{flex-direction:column}
    }

    /* ===== (‡πÉ‡∏´‡∏°‡πà) ‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà 2x2 ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ===== */
    .box.gallery{background:linear-gradient(180deg,#f8fbff,#f7fffb)}
    .gallery-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:12px;
      margin-top:10px;
    }
    .gallery-item{
      border-radius:12px;
      padding:22px 16px;
      text-align:center;
      font-weight:700;
      color:#234;
      cursor:pointer;
      background:var(--bg, #eef5ff);
      border:1px solid rgba(0,0,0,0.04);
      transition:transform .2s ease, box-shadow .2s ease;
      user-select:none;
    }
    .gallery-item:hover{ transform:translateY(-3px); box-shadow:0 8px 18px rgba(0,0,0,0.08); }
    .gallery-item img{
      width:56px; height:56px; object-fit:cover; border-radius:8px; margin-bottom:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.08);
    }
    .gallery-item .title{opacity:.9}

    /* ===== (‡πÄ‡∏û‡∏¥‡πà‡∏°) Lightbox ===== */
    .lightbox{
      position:fixed; inset:0; background:rgba(0,0,0,.85); display:none; align-items:center; justify-content:center; z-index:9999;
    }
    .lightbox.open{display:flex}
    .lightbox-inner{position:relative; width:min(96vw,1100px); max-height:92vh; display:flex; align-items:center; justify-content:center}
    .lightbox img{max-width:100%; max-height:92vh; border-radius:12px; box-shadow:0 12px 32px rgba(0,0,0,.5)}
    .lb-close, .lb-prev, .lb-next{
      position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,255,255,.12); color:#fff; border:none; width:46px; height:46px; border-radius:50%;
      display:flex; align-items:center; justify-content:center; cursor:pointer; backdrop-filter:saturate(140%) blur(4px); transition:background .2s ease, transform .2s ease;
    }
    .lb-close{top:16px; right:16px; transform:none}
    .lb-prev{left:-58px}
    .lb-next{right:-58px}
    .lb-prev:hover,.lb-next:hover,.lb-close:hover{background:rgba(255,255,255,.22); transform:translateY(-50%) scale(1.04)}
    .lb-close:hover{transform:none; }
    .lb-caption{
      position:absolute; left:0; right:0; bottom:-50px; color:#fff; text-align:center; font-size:.95rem; opacity:.9
    }
    @media(max-width:720px){
      .lb-prev{left:6px} .lb-next{right:6px}
      .lb-caption{bottom:-40px; padding:0 10px}
    }

    /* ===== (‡πÄ‡∏û‡∏¥‡πà‡∏°) ‡∏™‡∏ß‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì/‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™‡πÄ‡∏™‡∏£‡∏¥‡∏°) ===== */
    .card{background:#fff; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.06); padding:16px; border:1px solid rgba(0,0,0,.04)}
    .input{width:100%; padding:10px 12px; border-radius:8px; border:1px solid #dfe7e2; background:#fbfdfb; font-size:14px}
    .input:focus{outline:none; border-color:#9ed5b2; box-shadow:0 0 0 3px rgba(46,139,87,.15)}
    .grid{display:grid; gap:10px}
    @media(min-width:680px){ .grid.cols-2{grid-template-columns:repeat(2,1fr)}; .grid.cols-3{grid-template-columns:repeat(3,1fr)}; .grid.cols-4{grid-template-columns:repeat(4,1fr)} }

    .btn.ghost{background:#fff; color:#2E8B57; border:1px solid #a8d5bf}
    .note{color:#555; font-size:.9rem}

    /* ‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏û (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà) */
    .credit{font-size:.8rem; color:#678; opacity:.9; margin-top:6px}
  </style>
</head>
<body>
  <!-- Header: change background-image URL below to your hero image -->
  <header class="hero" style="background-image:url('https://picsum.photos/seed/hero/1600/900')">
    <div class="hero-inner container">
      <h1 class="hero-title">‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
    </div>
  </header>

  <!-- green nav bar like original -->
  <nav class="topnav">
    <div class="container">
      <ul>
        <li><a href="#" data-target="home" class="nav-link">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
        <li><a href="#" data-target="details" class="nav-link">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a></li>
        <li><a href="#" data-target="calculator" class="nav-link">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢</a></li>
        <li><a href="#" data-target="contact" class="nav-link">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
      </ul>
    </div>
  </nav>

  <main class="container">
    <!-- HOME -->
    <section id="home" class="home-section">
      <!-- Category row (4 ‡∏ä‡πà‡∏≠‡∏á) -->
      <div class="cat-row">
        <div class="cat" data-cat="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß">üè†<strong>‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</strong></div>
        <div class="cat" data-cat="‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°">üèòÔ∏è<strong>‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°</strong></div>
        <div class="cat" data-cat="‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î">üè¢<strong>‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î</strong></div>
        <div class="cat" data-cat="‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà">‚ú®<strong>‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</strong></div>
      </div>

      <!-- Projects carousel -->
      <div class="projects-wrap">
        <h3 style="margin:12px 0 6px">‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
        <div class="projects-carousel" id="project-list"></div>
      </div>
    </section>

    <!-- DETAILS (single project view) -->
    <section id="project-detail" class="detail">
      <button id="back-home" style="background:none;border:none;color:var(--green);font-weight:700;margin-bottom:8px;cursor:pointer">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>

      <div class="box info">
        <h3 id="detail-name">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</h3>
        <div class="info-row">
          <div class="info-item">
            <div style="font-weight:700">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô</div>
            <div id="detail-type">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß 2 ‡∏ä‡∏±‡πâ‡∏ô ‡∏Ç‡∏ô‡∏≤‡∏î 60 ‡∏ï‡∏£.‡∏ß.</div>
          </div>
          <div class="info-item">
            <div style="font-weight:700">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢</div>
            <div id="detail-area">180 ‡∏ï‡∏£.‡∏°.</div>
          </div>
          <div class="info-item">
            <div style="font-weight:700">‡∏´‡πâ‡∏≠‡∏á / ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î</div>
            <div id="detail-room">3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô | 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ | ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î 2 ‡∏Ñ‡∏±‡∏ô</div>
          </div>
        </div>
      </div>

      <div class="box highlights">
        <h4>‚ú® ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô</h4>
        <ul id="detail-highlights" style="margin:0; padding-left:18px"></ul>
      </div>

      <!-- (‡πÉ‡∏´‡∏°‡πà) ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÅ‡∏ö‡∏ö 2x2 -->
      <div class="box gallery">
        <h4>üì∑ ‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</h4>
        <div class="gallery-grid" id="detail-gallery"></div>
      </div>

      <div class="box price">
        <div id="detail-price" style="font-size:26px; font-weight:800; color:#7b3f9a">‡πÄ‡∏û‡∏µ‡∏¢‡∏á 3,500,000 ‡∏ö‡∏≤‡∏ó</div>
        <div style="color:#6b6270; margin-top:6px">(‡∏ü‡∏£‡∏µ‡∏Ñ‡πà‡∏≤‡πÇ‡∏≠‡∏ô + ‡πÅ‡∏ñ‡∏°‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô)</div>
      </div>

      <div class="box contact">
        <div style="font-weight:700">üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</div>
        <div id="contact-phone" style="margin-top:8px">089-123-4567</div>
        <div id="contact-line" style="margin-top:6px">Line: @sukjaivilla</div>
        <a id="contact-action" href="#" style="display:inline-block;margin-top:10px;padding:10px 18px;border-radius:24px;background:#fff;color:#4b2b9e;text-decoration:none;font-weight:700">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏¢</a>
      </div>

    </section>

    <!-- Optional: calculator and contact sections (kept simple) -->
    <section id="calculator" style="display:none; margin-top:12px">
      <div class="box">
        <h3>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≠‡∏ô (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)</h3>
        <form id="mortgage-form" onsubmit="return false;">
          <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px; margin-top:10px">
            <div>
              <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)</label>
              <input id="calc-price" type="number" value="3200000" min="0" step="1000">
            </div>
            <div>
              <label>‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå (%)</label>
              <input id="calc-down" type="number" value="10" min="0" max="100" step="1">
            </div>
            <div>
              <label>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ï‡πà‡∏≠‡∏õ‡∏µ (%)</label>
              <input id="calc-rate" type="number" value="5.5" min="0" step="0.01">
            </div>
            <div>
              <label>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏õ‡∏µ)</label>
              <input id="calc-years" type="number" value="30" min="1" step="1">
            </div>
          </div>
          <div style="margin-top:12px">
            <button id="calc-btn" class="btn" style="background:var(--green);">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
            <button id="calc-reset" class="btn" style="background:#888; margin-left:8px;">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
          </div>
        </form>
        <div id="calc-result" class="box" style="display:none; margin-top:12px;">
          <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</strong> <span id="months">0</span></p>
          <p><strong>‡∏¢‡∏≠‡∏î‡∏ú‡πà‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì):</strong> <span id="monthly">0</span> ‡∏ø</p>
          <p><strong class="small">‡∏£‡∏ß‡∏°‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:</strong> <span id="total-interest">0</span> ‡∏ø</p>
        </div>
        <div style="margin-top:10px; color:#555; font-size:0.9rem">
          ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°: ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡πà‡∏ß‡∏ô" ‡∏ö‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        </div>
      </div>
    </section>

    <section id="contact" style="display:none; margin-top:12px">
      <div class="box">
        <h3>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h3>
        <form id="contact-form" onsubmit="submitContact(event)">
          <div style="display:grid; gap:8px; max-width:600px">
            <input id="contact-name" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•" required>
            <input id="contact-email" type="email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" required>
            <input id="contact-phone" type="text" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" required>
            <textarea id="contact-message" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°" rows="4" required></textarea>
            <div>
              <button class="btn" type="submit" style="background:var(--green);">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
              <button id="contact-cancel" class="btn" style="background:#888; margin-left:8px;">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <footer style="margin-top:18px; padding:12px 0; text-align:center">¬© 2025 ‚Äî ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</footer>
  </main>

  <!-- (‡πÄ‡∏û‡∏¥‡πà‡∏°) Lightbox DOM -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <div class="lightbox-inner">
      <button class="lb-close" id="lb-close" aria-label="‡∏õ‡∏¥‡∏î">‚úï</button>
      <button class="lb-prev" id="lb-prev" aria-label="‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚Äπ</button>
      <img id="lb-img" alt="">
      <button class="lb-next" id="lb-next" aria-label="‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">‚Ä∫</button>
      <div class="lb-caption" id="lb-cap"></div>
    </div>
  </div>

  <script>
    // Utility
    const $ = (s) => document.querySelector(s);
    const $all = (s) => Array.from(document.querySelectorAll(s));

    // Categories and projects (same as before) + (‡πÄ‡∏û‡∏¥‡πà‡∏°) gallery ‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
    const categories = ["‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß","‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°","‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î","‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà"];
    const projects = [
  {
    id:'A',
    name:'‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏ù‡∏±‡∏ô A (Sansiri) ',
    category:'‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß',
    price:3500000,
    type:'‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß 2 ‡∏ä‡∏±‡πâ‡∏ô',
    lot:'60 ‡∏ï‡∏£.‡∏ß.',
    area:'180 ‡∏ï‡∏£.‡∏°.',
    rooms:'3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô | 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ | ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î 2 ‡∏Ñ‡∏±‡∏ô',
    highlights:['‡πÉ‡∏Å‡∏•‡πâ‡∏´‡πâ‡∏≤‡∏á ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤','‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÇ‡∏°‡πÄ‡∏î‡∏¥‡∏£‡πå‡∏ô ‡πÇ‡∏õ‡∏£‡πà‡∏á ‡πÇ‡∏•‡πà‡∏á','‡∏°‡∏µ‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏ô‡πÄ‡∏•‡πá‡∏Å'],
    img:'https://www.sansiri.com/media/cache/8b/73/8b732129c1fa0cf2ff5c80e3e7fda1cc.jpg', // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á hero image ‡∏à‡∏≤‡∏Å Sansiri
    phone:'089-123-4567',
    line:'@sukjaivilla',
    gallery:[
      {
        title:'‡πÅ‡∏ö‡∏ö‡∏ö‡πâ‡∏≤‡∏ô The City The City Pinklao ‚Äî Sansiri',
        img:'https://images.sansiri.com/share/wp-content/uploads/2023/05/19272846/1920_The_City_The_City_Pinklao_Exterior-1-scaled.jpg',
        bg:'linear-gradient(180deg,#e6f0ff,#d9e8ff)',
        credit:'Sansiri website'
      },
      {
        title:'‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô (Sansiri)',
        img:'https://www.sansiri.com/media/cache/97/9f/979f005e079c8c698c92184d49adfba4.jpg',
        bg:'linear-gradient(180deg,#ddf7e7,#c9f1de)',
        credit:'Sansiri website'
      },
      {
        title:'‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô (Sansiri)',
        img:'https://www.sansiri.com/media/cache/2f/23/2f23d4bcc49f9a39e5e0986fe8c81757.jpg',
        bg:'linear-gradient(180deg,#efe3ff,#e5d7ff)',
        credit:'Sansiri website'
      },
      {
        title:'Floor Plan (Sansiri)',
        img:'https://www.sansiri.com/media/cache/ab/96/ab96aa7b9a7e0b4a9b0c12f00f12e3c1.jpg',
        bg:'linear-gradient(180deg,#ffe9d6,#ffe0c1)',
        credit:'Sansiri website'
      }
    ]
  },
  {
    id:'B',
    name:'‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏à B (Sansiri)',
    category:'‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°',
    price:2200000,
    type:'‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏° 2 ‡∏ä‡∏±‡πâ‡∏ô',
    lot:'28 ‡∏ï‡∏£.‡∏ß.',
    area:'110 ‡∏ï‡∏£.‡∏°.',
    rooms:'3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô | 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥',
    highlights:['‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ','‡∏ó‡∏≥‡πÄ‡∏•‡πÉ‡∏Å‡∏•‡πâ‡∏ï‡∏•‡∏≤‡∏î','‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢'],
    img:'https://images.sansiri.com/share/wp-content/uploads/2022/10/12170839/0122_Origin_Salil_Sathorn-Pinklao_facade_2-1.jpg',
    phone:'081-987-6543',
    line:'@townhome_shop',
    gallery:[
      {
        title:'‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏° Origin Salil Sathorn‚ÄìPinklao',
        img:'https://images.sansiri.com/share/wp-content/uploads/2022/10/12170839/0122_Origin_Salil_Sathorn-Pinklao_facade_2-1.jpg',
        bg:'linear-gradient(180deg,#e6f0ff,#d9e8ff)',
        credit:'Sansiri website'
      },
      {
        title:'‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°',
        img:'https://www.sansiri.com/media/cache/17/6a/176a326ab22e4113ae592be77701c24c.jpg',
        bg:'linear-gradient(180deg,#ddf7e7,#c9f1de)',
        credit:'Sansiri website'
      },
      {
        title:'‡∏Ñ‡∏£‡∏±‡∏ß‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°',
        img:'https://www.sansiri.com/media/cache/04/c5/04c51953efddda3722e45160d38ba86f.jpg',
        bg:'linear-gradient(180deg,#efe3ff,#e5d7ff)',
        credit:'Sansiri website'
      },
      {
        title:'Floor Plan Townhome',
        img:'https://www.sansiri.com/media/cache/df/0a/df0a19a5985ad1a66f0b5c55b3b7567c.jpg',
        bg:'linear-gradient(180deg,#ffe9d6,#ffe0c1)',
        credit:'Sansiri website'
      }
    ]
  },
  {
    id:'C',
    name:'‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏™‡∏∏‡∏Ç‡πÉ‡∏à C (Sansiri)',
    category:'‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î',
    price:1800000,
    type:'‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô',
    lot:'-',
    area:'78 ‡∏ï‡∏£.‡∏°.',
    rooms:'2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô | 1 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥',
    highlights:['‡∏ß‡∏¥‡∏ß‡∏™‡∏ß‡∏ô‡∏™‡∏ß‡∏¢','‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™','‡πÉ‡∏Å‡∏•‡πâ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤'],
    img:'https://images.sansiri.com/share/wp-content/uploads/2022/05/26172154/Sansiri_Blue_Pond-Facade-Iron-island_v02-1-scaled.jpg',
    phone:'090-111-2222',
    line:'@condo_sukjai',
    gallery:[
      {
        title:'Facade ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î Blue Pond (Sansiri)',
        img:'https://images.sansiri.com/share/wp-content/uploads/2022/05/26172154/Sansiri_Blue_Pond-Facade-Iron-island_v02-1-scaled.jpg',
        bg:'linear-gradient(180deg,#e6f0ff,#d9e8ff)',
        credit:'Sansiri website'
      },
      {
        title:'‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î',
        img:'https://www.sansiri.com/media/cache/9c/83/9c8341eba2413ea6b4e1d3e2be61c473.jpg',
        bg:'linear-gradient(180deg,#ddf7e7,#c9f1de)',
        credit:'Sansiri website'
      },
      {
        title:'‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î',
        img:'https://www.sansiri.com/media/cache/f3/94/f394c779522dffc4c0b1fd9fba25c27a.jpg',
        bg:'linear-gradient(180deg,#efe3ff,#e5d7ff)',
        credit:'Sansiri website'
      },
      {
        title:'Floor Plan ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î',
        img:'https://www.sansiri.com/media/cache/ab/ce/abcedce0123456789abcdef.jpg',
        bg:'linear-gradient(180deg,#ffe9d6,#ffe0c1)',
        credit:'Sansiri website (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)'
      }
    ]
  }
  // ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà D ‡∏Å‡πá‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô...
];

    // Track last viewed project for "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î" nav
    let lastViewedId = null;

    // ===== Lightbox State =====
    let lbOpen = false;
    let lbProject = null;
    let lbIndex = 0;

    function openLightbox(projectId, index){
      lbProject = projects.find(p=>p.id===projectId);
      if(!lbProject || !lbProject.gallery || !lbProject.gallery.length) return;
      lbIndex = (index||0);
      const g = lbProject.gallery[lbIndex];
      const box = $('#lightbox');
      $('#lb-img').src = g.img;
      $('#lb-img').alt = g.title || '';
      $('#lb-cap').textContent = (g.title? g.title+' ‚Äî ': '') + (g.credit || '');
      box.classList.add('open');
      box.setAttribute('aria-hidden','false');
      lbOpen = true;
    }
    function closeLightbox(){
      $('#lightbox').classList.remove('open');
      $('#lightbox').setAttribute('aria-hidden','true');
      lbOpen = false;
    }
    function lbNext(){
      if(!lbProject) return;
      lbIndex = (lbIndex + 1) % lbProject.gallery.length;
      const g = lbProject.gallery[lbIndex];
      $('#lb-img').src = g.img; $('#lb-img').alt = g.title || ''; $('#lb-cap').textContent = (g.title? g.title+' ‚Äî ': '') + (g.credit || '');
    }
    function lbPrev(){
      if(!lbProject) return;
      lbIndex = (lbIndex - 1 + lbProject.gallery.length) % lbProject.gallery.length;
      const g = lbProject.gallery[lbIndex];
      $('#lb-img').src = g.img; $('#lb-img').alt = g.title || ''; $('#lb-cap').textContent = (g.title? g.title+' ‚Äî ': '') + (g.credit || '');
    }

    // render categories (click to filter)
    function setupCategoryButtons(){
      const cats = document.querySelectorAll('.cat');
      cats.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          $all('.cat').forEach(c=>c.classList.remove('active'));
          btn.classList.add('active');
          const cat = btn.getAttribute('data-cat');
          renderProjects(cat);
          document.querySelector('.projects-wrap').scrollIntoView({behavior:'smooth'});
        });
      });
      const first = document.querySelector('.cat'); if(first) first.classList.add('active');
    }

    // render project cards (removed favorites button)
    function renderProjects(category=null){
      const wrap = $('#project-list'); if(!wrap) return;
      wrap.innerHTML = '';
      const list = category ? projects.filter(p=>p.category===category) : projects;
      if(list.length===0){ wrap.innerHTML = '<div style="padding:18px;color:#666">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</div>'; return; }

      list.forEach(p=>{
        const el = document.createElement('div'); el.className='project-card';
        el.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="project-body">
            <div class="project-title">${p.name}</div>
            <div class="project-desc">${p.type} ‚Ä¢ ${p.lot}</div>
            <div class="project-price">${p.price.toLocaleString('th-TH')} ‡∏ø</div>
            <div style="display:flex; gap:8px; margin-top:10px">
              <button class="btn btn-open" data-id="${p.id}" style="background:var(--green);">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
              <button class="btn btn-quick" data-price="${p.price}" style="background:#6c757d">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡πà‡∏ß‡∏ô</button>
            </div>
          </div>`;
        wrap.appendChild(el);
      });

      // attach events
      $all('.btn-open').forEach(b=>b.addEventListener('click', ()=>openProject(b.getAttribute('data-id'))));
      $all('.btn-quick').forEach(b=>b.addEventListener('click', ()=>{
        const price = Number(b.getAttribute('data-price'))||0;
        $('#calc-price').value = price; // prefill calculator
        showSection('calculator');
        // smooth scroll to calculator
        setTimeout(()=>document.getElementById('calc-price').scrollIntoView({behavior:'smooth'}),200);
      }));
    }

    // show/hide sections and manage nav active state
    function showSection(name){
      // hide detail if showing
      const detail = document.getElementById('project-detail');
      if(detail) detail.style.display = 'none';
      // sections: home, calculator, contact
      const sections = { home: document.querySelector('.home-section'), calculator: $('#calculator'), contact: $('#contact') };
      Object.values(sections).forEach(s=>{ if(s) s.style.display='none'; });
      if(sections[name]) sections[name].style.display = 'block';
      // nav active
      $all('.nav-link').forEach(a=>a.classList.remove('active'));
      const nav = $all('.nav-link').find(a=>a.dataset.target===name);
      if(nav) nav.classList.add('active');
      window.scrollTo({top:0, behavior:'smooth'});
    }

    // open project detail
    function openProject(id){
      const p = projects.find(x=>x.id===id); if(!p) return;
      lastViewedId = p.id;
      $('#detail-name').textContent = p.name;
      $('#detail-type').textContent = p.type + ' ‡∏Ç‡∏ô‡∏≤‡∏î ' + p.lot;
      $('#detail-area').textContent = p.area;
      $('#detail-room').textContent = p.rooms;
      $('#detail-price').textContent = '‡πÄ‡∏û‡∏µ‡∏¢‡∏á ' + p.price.toLocaleString('th-TH') + ' ‡∏ö‡∏≤‡∏ó';
      const ul = $('#detail-highlights'); ul.innerHTML='';
      if(Array.isArray(p.highlights)) p.highlights.forEach(h=>{ const li=document.createElement('li'); li.textContent=h; ul.appendChild(li);});
      $('#contact-phone').textContent = p.phone || '';
      $('#contact-line').textContent = 'Line: ' + (p.line || '‚Äî');
      // contact action -> mailto
      const subject = encodeURIComponent('‡∏™‡∏ô‡πÉ‡∏à‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ' + p.name);
      const body = encodeURIComponent('‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞\n\n‡∏ú‡∏°/‡∏â‡∏±‡∏ô‡∏™‡∏ô‡πÉ‡∏à ' + p.name + ' (‡∏£‡∏≤‡∏Ñ‡∏≤ ' + p.price.toLocaleString('th-TH') + ' ‡∏ö‡∏≤‡∏ó)\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ: ' + (p.phone||''));
      $('#contact-action').href = 'mailto:youremail@example.com?subject=' + subject + '&body=' + body; // change if needed

      // (‡πÉ‡∏´‡∏°‡πà) render ‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà
      const gwrap = $('#detail-gallery');
      if(gwrap){
        gwrap.innerHTML = '';
        if(Array.isArray(p.gallery) && p.gallery.length){
          p.gallery.forEach((g, idx)=>{
            const card = document.createElement('div');
            card.className = 'gallery-item';
            if(g.bg) card.style.setProperty('--bg', g.bg);
            card.innerHTML = `
              <img src="${g.img}" alt="${g.title}">
              <div class="title">${g.title}</div>
              ${g.credit ? `<div class="credit">${g.credit}</div>` : ''}`;
            // >>> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Lightbox (‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà)
            card.addEventListener('click', ()=> openLightbox(p.id, idx));
            gwrap.appendChild(card);
          });
        }else{
          gwrap.innerHTML = '<div style="color:#567">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</div>';
        }
      }

      document.getElementById('project-detail').style.display = 'block';

      // set nav active to "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"
      $all('.nav-link').forEach(a=>a.classList.remove('active'));
      const detailsNav = $all('.nav-link').find(a=>a.dataset.target==='details');
      if(detailsNav) detailsNav.classList.add('active');

      window.scrollTo({top:0, behavior:'smooth'});
    }

    // mortgage calculator logic
    function formatNumber(n){ return n.toLocaleString('th-TH'); }
    function calculateMortgage(){
      const price = Number($('#calc-price').value) || 0;
      const downPct = Number($('#calc-down').value) || 0;
      const ratePct = Number($('#calc-rate').value) || 0;
      const years = Number($('#calc-years').value) || 0;
      const down = price * (downPct/100);
      const principal = price - down;
      const monthlyRate = (ratePct/100)/12;
      const n = years*12;
      let monthly = 0;
      if(n===0) return;
      if(monthlyRate === 0) monthly = principal / n;
      else{ const pow = Math.pow(1+monthlyRate, n); monthly = principal * (monthlyRate * pow) / (pow - 1); }
      const totalPaid = monthly * n; const totalInterest = totalPaid - principal;
      $('#months').textContent = n; $('#monthly').textContent = formatNumber(Math.round(monthly)); $('#total-interest').textContent = formatNumber(Math.round(totalInterest));
      $('#calc-result').style.display = 'block';
    }

    // contact form submit (mailto fallback)
    function submitContact(e){
      e.preventDefault();
      const name = $('#contact-name').value.trim(); const email = $('#contact-email').value.trim(); const phone = $('#contact-phone').value.trim(); const message = $('#contact-message').value.trim();
      if(!name||!email||!phone||!message){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö'); return; }
      const subject = encodeURIComponent('‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö');
      const body = encodeURIComponent('‡∏ä‡∏∑‡πà‡∏≠: '+name+'\n‡∏≠‡∏µ‡πÄ‡∏°‡∏•: '+email+'\n‡πÄ‡∏ö‡∏≠‡∏£‡πå: '+phone+'\n\n'+message);
      window.location.href = 'mailto:youremail@example.com?subject=' + subject + '&body=' + body; // change email here
    }

    // nav links (‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π)
    function setupNav(){
      $all('.nav-link').forEach(a=>{
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          const t=a.dataset.target;
          if(t==='home') showSection('home');
          else if(t==='calculator') showSection('calculator');
          else if(t==='contact') showSection('contact');
          else if(t==='details'){
            if(lastViewedId){ openProject(lastViewedId); }
            else{
              showSection('home');
              const wrap = document.querySelector('.projects-wrap');
              if(wrap) wrap.scrollIntoView({behavior:'smooth'});
            }
          }
        });
      });
    }

    // ===== (‡πÄ‡∏û‡∏¥‡πà‡∏°) ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì" ‡πÅ‡∏•‡∏∞ "‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤" (‡∏´‡πà‡∏≠ element ‡πÄ‡∏î‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏•‡∏≤‡∏™‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÅ‡∏ö‡∏ö script) =====
    function polishForms(){
      // calculator: ‡∏´‡πà‡∏≠ .box ‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô card ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡∏™‡πÑ‡∏ï‡∏•‡πå input
      const calc = $('#calculator .box');
      if(calc && !calc.classList.contains('card')) calc.classList.add('card');
      // ‡πÉ‡∏™‡πà‡∏Ñ‡∏•‡∏≤‡∏™ input ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏≠‡∏¥‡∏ô‡∏û‡∏∏‡∏ï
      ['#calc-price','#calc-down','#calc-rate','#calc-years'].forEach(sel=>{
        const el=$(sel); if(el) el.classList.add('input');
      });
      // contact: ‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
      const contactBox = $('#contact .box'); if(contactBox && !contactBox.classList.contains('card')) contactBox.classList.add('card');
      ['#contact-name','#contact-email','#contact-phone','#contact-message'].forEach(sel=>{
        const el=$(sel); if(el) el.classList.add('input');
      });
    }

    // ===== (‡πÄ‡∏û‡∏¥‡πà‡∏°) Lightbox controls =====
    function setupLightboxControls(){
      $('#lb-close').addEventListener('click', closeLightbox);
      $('#lb-next').addEventListener('click', lbNext);
      $('#lb-prev').addEventListener('click', lbPrev);
      // ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
      $('#lightbox').addEventListener('click', (e)=>{ if(e.target.id==='lightbox') closeLightbox(); });
      // ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î
      document.addEventListener('keydown', (e)=>{
        if(!lbOpen) return;
        if(e.key==='Escape') closeLightbox();
        else if(e.key==='ArrowRight') lbNext();
        else if(e.key==='ArrowLeft') lbPrev();
      });
    }

    // init
    document.addEventListener('DOMContentLoaded', ()=>{
      setupCategoryButtons(); renderProjects(categories[0]); setupNav();

      // calculator events
      $('#calc-btn').addEventListener('click', (e)=>{ e.preventDefault(); calculateMortgage(); });
      $('#calc-reset').addEventListener('click', (e)=>{ e.preventDefault(); $('#calc-price').value=3200000; $('#calc-down').value=10; $('#calc-rate').value=5.5; $('#calc-years').value=30; $('#calc-result').style.display='none'; });

      // contact form
      $('#contact-form').addEventListener('submit', submitContact);
      $('#contact-cancel').addEventListener('click', (e)=>{ e.preventDefault(); showSection('home'); });

      // (‡πÄ‡∏û‡∏¥‡πà‡∏°) ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á
      polishForms();
      // (‡πÄ‡∏û‡∏¥‡πà‡∏°) Lightbox
      setupLightboxControls();
    });
  </script>
</body>
</html>
